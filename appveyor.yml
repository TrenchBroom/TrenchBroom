version: 2.0.0-appveyor-{build}
install:
- cinst pandoc
- ps: Invoke-WebRequest 'https://github.com/wxWidgets/wxWidgets/releases/download/v3.1.1/wxWidgets-3.1.1-headers.7z' -OutFile 'headers.7z'
- ps: Invoke-WebRequest 'https://github.com/wxWidgets/wxWidgets/releases/download/v3.1.1/wxMSW-3.1.1_vc140_Dev.7z' -OutFile 'dev.7z'
- ps: Invoke-WebRequest 'https://github.com/wxWidgets/wxWidgets/releases/download/v3.1.1/wxMSW-3.1.1_vc140_ReleaseDLL.7z' -OutFile 'dll.7z'
- ps: Invoke-WebRequest 'https://github.com/wxWidgets/wxWidgets/releases/download/v3.1.1/wxMSW-3.1.1_vc140_ReleasePDB.7z' -OutFile 'pdb.7z'
- ps: if ("fc2fece046792772d4a05946de1b3a8cc8c69733" -ne (Get-FileHash -Path "headers.7z" -Algorithm SHA1).Hash) { exit }
- ps: if ("53bd51281fa9bbb9ce9389164c2f45792482bc83" -ne (Get-FileHash -Path "dev.7z" -Algorithm SHA1).Hash) { exit }
- ps: if ("9d0ed3988f43d9b4c32e0fd18863878a6bde6b7f" -ne (Get-FileHash -Path "dll.7z" -Algorithm SHA1).Hash) { exit }
- ps: if ("e5451c6b557693435e03d6c2d4576965e5c88b79" -ne (Get-FileHash -Path "pdb.7z" -Algorithm SHA1).Hash) { exit }
- ps: 7z x headers.7z -oc:\wxWidgets-3.1.1 -aoa
- ps: 7z x dev.7z -oc:\wxWidgets-3.1.1 -aoa
- ps: 7z x dll.7z -oc:\wxWidgets-3.1.1 -aoa
- ps: 7z x pdb.7z -oc:\wxWidgets-3.1.1 -aoa
clone_depth: 50
build_script:
- cmd: call appveyor.bat
artifacts:
- path: cmakebuild\*.7z
- path: cmakebuild\*.7z.md5
deploy:
  description: 'release description'
  provider: GitHub
  auth_token:
    secure: 'xTcTfr+JiHlF5y4sSlB6so7fIGM1d+39JtNoaeeqtdEmucEqASb/xhs60ayi4mUm'
  draft: true
  prerelease: false
  on:
    appveyor_repo_tag: true
